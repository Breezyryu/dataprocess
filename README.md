# 배터리 데이터 처리 시스템

배터리 충방전 데이터를 자동으로 분류하고 분석하는 범용 시스템입니다.

## 주요 기능

✅ **자동 사이클러 분류**: 데이터 경로를 자동으로 분석하여 토요(Toyo) 또는 PNE 사이클러로 식별  
✅ **메타 정보 추출**: 디렉토리 구조, 파일 개수, 용량 정보 자동 추출  
✅ **시각화**: 분류 결과를 그래프로 시각화  
✅ **결과 저장**: CSV 형식으로 분석 결과 저장  
✅ **범용성**: 어떤 경로의 데이터도 처리 가능한 유연한 구조

## 설치 방법

### 1. 저장소 클론 또는 다운로드

```bash
cd c:\Users\Ryu\Python_project\data\dataprocess
```

### 2. 가상 환경 설정 (이미 설정됨)

```bash
# 가상 환경이 없다면
python -m venv .venv

# 가상 환경 활성화 (Windows)
.venv\Scripts\activate
```

### 3. 의존성 설치

```bash
pip install -e .
```

## 사용 방법

### Jupyter Notebook으로 실행

1. Jupyter Notebook 실행:

   ```bash
   jupyter notebook
   ```

2. `dataprocess.ipynb` 파일 열기

3. 셀을 순서대로 실행:
   - **Setup**: 필수 라이브러리 import
   - **경로 입력**: 분석할 배터리 데이터 경로 입력
   - **자동 분류**: 사이클러 타입 자동 식별
   - **시각화**: 분류 결과 그래프 표시
   - **결과 저장**: CSV 파일로 저장

### 새로운 경로 분석하기

`dataprocess.ipynb`의 "경로 입력" 셀에서 `paths` 리스트를 수정:

```python
paths = [
    r"C:\새로운\경로\1",
    r"C:\새로운\경로\2",
    # ... 추가 경로
]
```

## 분류 기준

| 사이클러 타입 | 식별 기준                           |
| ------------- | ----------------------------------- |
| **PNE**       | 데이터 경로에 `Pattern` 폴더가 존재 |
| **Toyo**      | `Pattern` 폴더가 없음               |

## 데이터 구조

### Toyo 사이클러

- 숫자형 서브디렉토리 (예: `30`, `31`)
- `.PTN` 파일
- `capacity.log` 파일

### PNE 사이클러

- `M##Ch###[###]` 형식의 서브디렉토리
- `Pattern` 폴더
- `.cts`, `.cyc`, `.log`, `.sch` 파일

## 출력 결과

### 콘솔 출력

- 총 분석 경로 개수
- 사이클러 타입별 통계
- 상세 분류 테이블

### 시각화

- 사이클러 타입 분포 파이 차트
- 사이클러별 평균 용량 바 차트

### CSV 파일

`battery_classification_results.csv` 파일에 다음 정보 저장:

- 경로
- 폴더명
- 사이클러 타입
- 용량 (mAh)
- 하위 폴더 개수
- 파일 개수
- Pattern 폴더 존재 여부
- 경로 존재 여부

## 프로젝트 구조

```
dataprocess/
├── dataprocess.ipynb      # 메인 노트북 (데이터 분류 및 분석)
├── pyproject.toml         # 프로젝트 설정 및 의존성
├── README.md              # 이 파일
├── .gitignore             # Git 무시 파일 목록
├── .venv/                 # 가상 환경
└── Rawdata/               # 배터리 원시 데이터 (gitignore)
```

## 향후 개선 계획

- [ ] 별도 Python 모듈로 함수 분리 (`cycler_utils.py`, `data_loader.py`)
- [ ] 실제 데이터 로딩 기능 추가
- [ ] 충방전 사이클 데이터 분석 기능
- [ ] 자동화 스크립트 (새 데이터 자동 감지 및 분류)
- [ ] 웹 대시보드 개발

## 기술 스택

- **Python** 3.12+
- **pandas**: 데이터 처리 및 분석
- **numpy**: 수치 연산
- **matplotlib**: 데이터 시각화
- **Jupyter**: 인터랙티브 노트북 환경

## 라이센스

내부 프로젝트용

## 문의

문제가 발생하거나 개선 제안이 있으면 이슈를 등록해주세요.
